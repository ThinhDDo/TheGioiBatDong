<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="ISO-8859-1">
<title>Profile Information</title>
<link rel="stylesheet" th:href="@{https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css}">
<link rel="stylesheet" th:href="@{/css/login-style.css}">
<link rel="stylesheet" th:href="@{/css/profile.css}">
</head>
<body>
	<!-- USER INFO -->
	<div class="container-fluid p-5">

		<div class="container mt-1 form-section">
			
			<h1 class="text-center">PROFILE</h1>

			<div class="avata d-flex justify-content-center m-4">
				<form method="post" action="#" th:action="@{/save-avata}" enctype="multipart/form-data" th:object="${profile}">
					<input th:field="*{username}" type="text" hidden="true">
					<input id="avata-input" name="file" onchange="getURL()" type="file" hidden="true">
					<img onclick="showDialog()" id="avata-img" class="rounded-circle" th:src="@{/img/{path}(path=${profile.avata})}">
					<button type="submit" id="avata-submit" hidden="true"></button>
				</form>
			</div>

			<form method="post" action="#" th:action="@{/save-profile}" th:object="${profile}">
				
					<div class="form-row">
						<div class="form-group col-md-4">
							<label for="inputFullName">Full Name</label>
							<input type="text" th:field="*{fullname}" class="form-control" placeholder="Full name" required>
						</div>

						<div class="form-group col-md-4">
						<label for="inputEmail">Email</label>
							<input type="email" th:field="*{email}" class="form-control" placeholder="Your Email" required>
						</div>
						
						<div class="form-group col-md-4">
						<label for="inputBirthday">Birthday</label>
							<input type="text" th:field="*{birthday}" class="form-control" placeholder="Your Birthday">
						</div>
					</div>
					
					<div class="form-row">
						<div class="form-group col-md-4">
						<label for="inputUsername">Username</label>
							<input type="text" th:field="*{username}" class="form-control" placeholder="Your Username" required readonly>
						</div>

						<div class="form-group col-md-4">
						<label for="inputPassword">Password</label>
							<input type="password" th:field="*{password}" class="form-control" placeholder="Your Password">
						</div>
						
						<div class="form-group col-md-4">
						<label for="inputPhone">Phone</label>
							<input type="text" th:field="*{phone}" class="form-control" placeholder="Your Phone">
						</div>
					</div>

					<div class="form-row">
						<div class="form-group col-md-12">
						<label for="inputAddress">Address</label>
							<input type="text" th:field="*{address}" class="form-control" placeholder="Your Address">
						</div>
					</div>

				
				
				<th:block th:if="${successMessage}!=''">
					<div class="alert-success" th:text="${successMessage}"></div>
				</th:block>
				
				<div class="d-flex justify-content-start mt-3">
					<button class="btn btn-success" type="submit">SAVE</button>
					<a class="btn btn-secondary ml-2" th:href="@{/index}">BACK</a>
				</div>
			</form>
		</div>

	</div>


	<!-- JAVASCRIPT -->
	<script>
		function showDialog() {
			document.getElementById('avata-input').click();
		}

		function getURL() {	
			console.log("SUBMITED");
			document.getElementById('avata-submit').click();
		}
	</script>
</body>
</html>